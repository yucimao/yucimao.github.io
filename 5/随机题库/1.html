---
layout: page2
permalink: sjtk/1
---
<title>随机题库 - 猫球博客</title>
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<br />
<script src="/js/jquery.min.js"></script>
<style>
    .heimu2 {
      background-color: #252525;
      color: #252525;
      transition: color 0.2s;
    }
    
    .heimu2:hover {
      color: #ffffff;
    }
    </style>
<div id="dy1"></div>
<span id="结果"></span>
<script>
    let LocString = String(window.document.location.href);
    function GetQueryString(name) {
        let rs = new RegExp("(^|)" + name + "=([^&]*)(&|$)", "gi").exec(LocString), tmp;
        if (tmp = rs) { return decodeURI(tmp[2]); } return "";
    }
    let i = GetQueryString("i"); let f = GetQueryString("f"); let n = GetQueryString("n");
    if (f > 0) { } else { f = 1; }
    i = i.split("-");
    let ib = '/5/随机题库/i/' + i[0] + '.json';
    if (i.length > 1) {
        for (let ia = 1; i.length > ia; ia++) { ib += '／/5/随机题库/i/' + i[ia] + '.json'; }
    }
    ib = ib.split("／");
    let ic = ib[0];

    let LIBS = {}
    $(function () {
        const LIB_URLS = ib;

        function LoadAll(func) {
            let idx = 0;
            function loadItem() {
                if (LIB_URLS.length <= idx) { func(); return; }
                let current = LIB_URLS[idx];
                $.get(current, (data) => {
                    LIBS[current] = data;
                    console.log(data)
                    idx++;
                    loadItem()
                })
            }
            loadItem();
        }

        LoadAll(function () {
            window.pvo = LIBS[ic]
            let dy1 = '<center>　<br>　<span class="qibiaoti">' + n + '<\/span>　<\/center><input type="text" id="w" value="' + f + '" style="width:40px"><button type="button" onclick="按钮()" style="font-size:1em;">抽取<\/button><br>';
            document.getElementById("dy1").innerHTML = dy1;
        })
    });

    function 按钮() {
        let w = document.getElementById("w").value;
        let 开关 = 0;
        let 结果 = " ";
        let pvo2 = pvo;

        for (let ka = 0; ka < w; ka++) {
            let 随机数 = Math.floor(Math.random() * pvo2.length);
            if (pvo2[随机数].indexOf("】") != -1) {
                let 临时1 = new Array();
                临时1 = pvo2[随机数].split("】");
                结果 += "<hr>" + 临时1[1];
            }
            else { 结果 += "<hr>" + pvo2[随机数]; }
        }

        while (开关 == 0) {
            if (结果.indexOf("[") != -1) {
                let 临时1 = new Array();
                临时1 = 结果.split("[");  //a[b,c]d[e,f]
                结果 = 临时1[0]; //a

                for (let kb = 1; 临时1.length > kb; kb++) {
                    let 临时2 = new Array();
                    临时2 = 临时1[kb].split("]");
                    if (临时2[0].indexOf("／") != -1) {
                        let 替换 = new RegExp('／', 'g');
                        let 临时3 = 临时2[0].replace(替换, '');

                        let val = LIBS['/5/随机题库/i/' + 临时3 + '.json']
                        console.log(val)

                        let 随机数 = Math.floor(Math.random() * val.length);

                        if (val[随机数].indexOf("】") != -1) {
                            let 临时4 = new Array();
                            临时4 = val[随机数].split("】");
                            结果 += 临时4[1];
                        }
                        else { 结果 += val[随机数]; }
                    }
                    else {
                        if (临时2[0].indexOf("-") != -1) {    //如果是0-5
                            let 临时3 = 临时2[0].split("-");
                            let 临时4 = 临时3[1] - 临时3[0];
                            let 随机数 = Math.floor(Math.random() * 临时4 + 临时3[0]);
                            结果 += 随机数;
                        }
                        else {
                            let 临时3 = 临时2[0].split(",");    //如果是a,b
                            let 随机数 = Math.floor(Math.random() * 临时3.length);
                            结果 += 临时3[随机数];
                        }
                    }
                    结果 += 临时2[1];
                }
            }
            else { 开关 = 1 }
        }
        let 替换 = new RegExp('　', 'g');
        结果 = 结果.replace(替换, '<br>');
        替换 = new RegExp('［1:', 'g');
        结果 = 结果.replace(替换, '<span class=\"heimu2\">');
        替换 = new RegExp(':1］', 'g');
        结果 = 结果.replace(替换, '<\/span>');
        document.getElementById("结果").innerHTML = 结果;
    }
</script>