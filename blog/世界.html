---
layout: page2
title: 猫球的世界
permalink: world
---
<style>
*{background-color: #111;color:#888}
*::-webkit-scrollbar {width: 10px;height: 1px;}
*::-webkit-scrollbar-thumb {background-color: #888;border-width: 10px;}
#back-top{display:none;}
a{color:#ccc;cursor:pointer;}
a:hover{color:#ddd;}
#body{margin:5% auto 20% auto;}
#dy{border-width:2px;border-color:#555;border-style:solid;}

@media screen and (min-width: 768px) { /*电脑*/
#body{width:60%;}
} /*电脑*/

@media screen and (max-width: 768px) { /*手机*/
#body{width:80%;}
} /*手机*/
</style>

<div id="body">
    <div id="地图">　</div>
    <div id="景色">　</div>
    <br/><br/><br/>
    <div id="选项"><a onclick="到处逛逛()">到处逛逛</a></div>

    </div>

<script>
document.getElementById("siteWelcome").innerHTML = "";

let 获取数据_地址,ix_输入,当前地图,临时,临时2;
let 地图_剧本="　",景色_剧本="　";
let 地图_打印="",景色_打印="";
let 地图_i=0,景色_i=0,
let 打印速度=175;
let ix="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
let ix_b="ixABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghjklmnopqrstuvwyz0123456789";
let 地图目录=new Array("测试1","测试2");

function 获取数据(){
    获取数据_地址="/i/x/mq_world/"+获取数据_地址+".json";
    let GetJson = $.ajax({
        url: 获取数据_地址,//json文件位置
        type: "GET",
        dataType: "json",
        async: false,
        success: function (data) {
        }
    });
    ix_输入=GetJson.responseText;
    解密();
    当前地图=ix_输入;
}

function 解密(){
替换 = new RegExp('', "g");
ix_输入 = ix_输入.replace(替换, '／');
for(let i=0;ix_b.length>i;i++){
    临时="／"+ix_b[i];
    临时2=ix[i];
    替换 = new RegExp(临时, "g");
    ix_输入 = ix_输入.replace(替换, 临时2);
}
替换 = new RegExp("／", "g");
ix_输入 = ix_输入.replace(替换, "");
ix_输入 = window.decodeURIComponent(atob(ix_输入));
}

function 打印机(){
    if(地图_剧本.length > 地图_i) {
            if (地图_剧本[地图_i] == "　"){地图_i+=1}
            else if (地图_剧本[地图_i] == "［") {
                地图_i+=1;
                while (地图_剧本[地图_i] != "］") {
                    地图_打印 += 地图_剧本[地图_i];
                    地图_i += 1;
                }
                地图_i+=1;
            }
            else{
            地图_打印 += 地图_剧本[地图_i];
            地图_i+=1;
            }
            document.getElementById("地图").innerHTML = 地图_打印;
        }
        else if(景色_剧本.length > 景色_i) {
            if (景色_剧本[景色_i] == "　"){景色_i+=1}
            else if (景色_剧本[景色_i] == "［") {
                景色_i+=1;
                while (景色_剧本[景色_i] != "］") {
                    景色_打印 += 景色_剧本[景色_i];
                    景色_i += 1;
                }
                景色_i+=1;
            }
            else{
                景色_打印 += 景色_剧本[景色_i];
                景色_i+=1;
            }
            document.getElementById("景色").innerHTML = 景色_打印;
        }
}

临时 = new Date().getDate()+new Date().getHours();
临时2 = 地图目录.length;
临时 = 临时%临时2;
当前地图 = 地图目录[临时];
获取数据_地址=当前地图;
获取数据();
地图_剧本 = 当前地图.split("[")[1].split("]")[0];
地图_打印="";
地图_i=0;
let 开始打印 = setInterval(打印机,打印速度);

临时 = 当前地图.split("[");
    临时2 = "";
    for(let i=2;临时.length>i;i++){
        临时2+="／"+临时[i];
    }
    替换 = new RegExp('^／', "g");
    临时2 = 临时2.replace(替换, '');
    临时2=临时2.split("／");

    let p = Array.from(临时2), i, a = [];
        while (p.length > 0) {
            i = parseInt(Math.random() * p.length);
            a.push(p[i]);
            p.splice(i, 1);
        }

        let 景色列表 = a;
        let 景色顺序 = 0;

function 到处逛逛(){

if(景色列表[景色顺序]){}
else{景色顺序=0;}
景色_剧本=景色列表[景色顺序];
景色_打印="";
景色_i=0;
景色顺序+=1;
}

</script>

